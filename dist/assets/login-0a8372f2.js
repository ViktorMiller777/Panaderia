import{u as I,r as s,a as t,b as c,i as p,w as e,e as o,g as a,j,k as B,c as E,t as N,l as T}from"./index-a0c1ea82.js";import{a as U}from"./axios-4a70c6fc.js";const q={key:0,class:"error-message"},L={__name:"login",setup(M){const v=I(),i=s(""),u=s(""),_=s("");let d=s(!1);const g=async()=>{try{const n=await U.post("http://localhost/login",{correo:i.value,contrasena:u.value});localStorage.setItem("jwtToken",n.data.data_token),d=!0,v.push("/almacen")}catch(n){console.error("Error de inicio de sesión:",n),_.value="Error al iniciar sesión. Verifica tus credenciales."}};async function y(){localStorage.removeItem("jwtToken"),d=!1,v.push("/login")}return(n,r)=>{const k=t("v-card-title"),f=t("v-text-field"),l=t("v-btn"),x=t("v-form"),V=t("v-card-text"),w=t("v-card"),S=t("v-col"),b=t("v-row"),C=t("v-container"),h=t("v-app");return c(),p(h,null,{default:e(()=>[o(C,null,{default:e(()=>[o(b,{justify:"center"},{default:e(()=>[o(S,{cols:"12",sm:"8",md:"6"},{default:e(()=>[o(w,null,{default:e(()=>[o(k,{class:"text-center"},{default:e(()=>[a("Inicio de Sesión")]),_:1}),o(V,null,{default:e(()=>[o(x,{onSubmit:j(g,["prevent"])},{default:e(()=>[o(f,{modelValue:i.value,"onUpdate:modelValue":r[0]||(r[0]=m=>i.value=m),label:"Usuario",required:""},null,8,["modelValue"]),o(f,{modelValue:u.value,"onUpdate:modelValue":r[1]||(r[1]=m=>u.value=m),label:"Contraseña",type:"password",required:""},null,8,["modelValue"]),o(l,{type:"submit",color:"primary"},{default:e(()=>[a("Iniciar Sesión")]),_:1}),B(d)?(c(),p(l,{key:1,onClick:y,color:"primary"},{default:e(()=>[a("Cerrar Sesión")]),_:1})):(c(),p(l,{key:0,to:"/login",color:"primary"},{default:e(()=>[a("Cerrar Sesión")]),_:1})),o(l,{to:"/register",color:"primary"},{default:e(()=>[a("Registrar usuario")]),_:1})]),_:1},8,["onSubmit"]),_.value?(c(),E("div",q,N(_.value),1)):T("",!0)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})}}};export{L as default};
